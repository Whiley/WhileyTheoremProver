type Buffer is ({int[] data, int wp} self)

assert:
  forall(Buffer x):
     x{wp:=0}.wp == 0
